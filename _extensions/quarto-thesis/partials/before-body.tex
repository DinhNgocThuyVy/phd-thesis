\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the pre-content pages

\pagestyle{plain} % Default to the plain heading style until the thesis style is called for the body content

% Prevent empty pages regardless of single/double-sided layout
\let\cleardoublepage\clearpage

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

% Check if we're using the custom cover
\makeatletter
\ifx\@use@custom@cover\@true
  % For PDF output: Check if there's a cover.pdf file available
  \IfFileExists{cover.pdf}{%
    % For PDF: If cover.pdf exists, include it directly
    \includepdf[pages=-]{cover.pdf}
    % Store information for HTML output in a macro (not used in PDF, but needed for HTML)
    \def\thesis@stored@title{\ttitle}
    \def\thesis@stored@author{\authorname}
    \def\thesis@stored@supervisor{\supname}
    \def\thesis@stored@degree{\degreename}
    \def\thesis@stored@dept{\deptname}
    \def\thesis@stored@univ{\univname}
  }{%
    % Otherwise, generate a title page with YAML info
    \begin{titlepage}
    \begin{center}
    
    \vspace*{.06\textheight}
    {\scshape\LARGE \univname\par}\vspace{1.5cm} % University name
    \textsc{\Large Doctoral Thesis}\\[0.5cm] % Thesis type
    
    \HRule \\[0.4cm] % Horizontal line
    {\huge \bfseries \ttitle\par}\vspace{0.4cm} % Thesis title
    \HRule \\[1.5cm] % Horizontal line
     
    \begin{minipage}[t]{0.4\textwidth}
    \begin{flushleft} \large
    \emph{Author:}\\
    $if(author.url)$
    \href{$author.url$}{\authorname} % Author name - remove the \href bracket to remove the link
    $else$
    \authorname
    $endif$
    \end{flushleft}
    \end{minipage}
    \begin{minipage}[t]{0.4\textwidth}
    \begin{flushright} \large
    \emph{Supervisor:} \\ 
    $if(thesis.supervisor.url)$%
    \href{$thesis.supervisor.url$}{\supname} % Supervisor name - remove the \href bracket to remove the link  
    $else$%
    \supname
    $endif$
    \end{flushright}
    \end{minipage}\\[3cm]
     
    \vfill
    
    \large \textit{A thesis submitted in fulfillment of the requirements\\ for the degree of \degreename}\\[0.3cm] % University requirement text
    \textit{in the}\\[0.4cm]
    \groupname\\
    \deptname\\[2cm] % Research group name and department name
     
    \vfill
    
    $if(thesis.logo)$
    $if(thesis.logo-height)$
    \includegraphics[height=$thesis.logo-height$]{$thesis.logo$} % University/department logo
    $else$
    \includegraphics{$thesis.logo$}
    $endif$
    $endif$
    
    $if(book.date)$
    {\large $book.date$}\\[4cm] % Date
    $endif$
    
    \vfill
    \end{center}
    \end{titlepage}
  }
\else
  % Original title page
  \begin{titlepage}
  \begin{center}
  
  \vspace*{.06\textheight}
  {\scshape\LARGE \univname\par}\vspace{1.5cm} % University name
  \textsc{\Large Doctoral Thesis}\\[0.5cm] % Thesis type
  
  \HRule \\[0.4cm] % Horizontal line
  {\huge \bfseries \ttitle\par}\vspace{0.4cm} % Thesis title
  \HRule \\[1.5cm] % Horizontal line
   
  \begin{minipage}[t]{0.4\textwidth}
  \begin{flushleft} \large
  \emph{Author:}\\
  $if(author.url)$
  \href{$author.url$}{\authorname} % Author name - remove the \href bracket to remove the link
  $else$
  \authorname
  $endif$
  \end{flushleft}
  \end{minipage}
  \begin{minipage}[t]{0.4\textwidth}
  \begin{flushright} \large
  \emph{Supervisor:} \\ 
  $if(thesis.supervisor.url)$%
  \href{$thesis.supervisor.url$}{\supname} % Supervisor name - remove the \href bracket to remove the link  
  $else$%
  \supname
  $endif$
  \end{flushright}
  \end{minipage}\\[3cm]
   
  \vfill
  
  \large \textit{A thesis submitted in fulfillment of the requirements\\ for the degree of \degreename}\\[0.3cm] % University requirement text
  \textit{in the}\\[0.4cm]
  \groupname\\
  \deptname\\[2cm] % Research group name and department name
   
  \vfill
  
  $if(thesis.logo)$
  $if(thesis.logo-height)$
  \includegraphics[height=$thesis.logo-height$]{$thesis.logo$} % University/department logo
  $else$
  \includegraphics{$thesis.logo$}
  $endif$
  $endif$
  
  $if(book.date)$
  {\large $book.date$}\\[4cm] % Date
  $endif$
  
  \vfill
  \end{center}
  \end{titlepage}
\fi
\makeatother

%----------------------------------------------------------------------------------------
%	DECLARATION PAGE
%----------------------------------------------------------------------------------------
$if(thesis.declaration)$
\begin{declaration}
\addchaptertocentry{\authorshipname} % Add the declaration to the table of contents
$if(thesis.declaration.text)$
$thesis.declaration.text$
$else$
\input{"$thesis.declaration$"}
$endif$
\end{declaration}
$endif$

$if(thesis.acknowledgements)$
%----------------------------------------------------------------------------------------
%	ACKNOWLEDGEMENTS
%----------------------------------------------------------------------------------------

\begin{acknowledgements}
\addchaptertocentry{\acknowledgementname} % Add the acknowledgements to the table of contents
$if(thesis.acknowledgements.text)$
$thesis.acknowledgements.text$
$else$
\input{"$thesis.acknowledgements$"}
$endif$
\end{acknowledgements}
$endif$

%----------------------------------------------------------------------------------------
%	ABSTRACT PAGES
%----------------------------------------------------------------------------------------

% English Abstract
$if(thesis.abstract.english)$
\begin{abstract}
\addchaptertocentry{\abstractname} % Add the abstract to the table of contents
$if(thesis.abstract.english.text)$
$thesis.abstract.english.text$
$else$
\input{"$thesis.abstract.english$"}
$endif$
\end{abstract}
$endif$

% French Abstract (Résumé)
$if(thesis.abstract.french)$
\renewcommand{\abstractname}{Résumé}
\begin{abstract}
\addchaptertocentry{\abstractname}
$if(thesis.abstract.french.text)$
$thesis.abstract.french.text$
$else$
\input{"$thesis.abstract.french$"}
$endif$
\end{abstract}
\renewcommand{\abstractname}{Abstract} % Reset to English for potential later use
$endif$

$if(thesis.dedication)$
%----------------------------------------------------------------------------------------
%	DEDICATION
%----------------------------------------------------------------------------------------

\dedicatory{\input{"$thesis.dedication$"}}
$endif$

% LIST OF CONTENTS/FIGURES/TABLES PAGES
\begingroup
\hypersetup{linkcolor=$if(toclinkcolor)$$toclinkcolor$$else$black$endif$}

\tableofcontents % Prints the main table of contents
\listoffigures % Prints the list of figures
\listoftables % Prints the list of tables

\endgroup

$if(thesis.abbreviations)$
%----------------------------------------------------------------------------------------
%	ABBREVIATIONS
%----------------------------------------------------------------------------------------

\input{"$thesis.abbreviations$"}
$endif$

$if(thesis.constants)$
%----------------------------------------------------------------------------------------
%	PHYSICAL CONSTANTS/OTHER DEFINITIONS
%----------------------------------------------------------------------------------------

\input{"$thesis.constants$"}
$endif$

$if(thesis.symbols)$
%----------------------------------------------------------------------------------------
%	SYMBOLS
%----------------------------------------------------------------------------------------

\input{"$thesis.symbols$"}
$endif$

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%----------------------------------------------------------------------------------------

\mainmatter % Begin numeric (1,2,3...) page numbering
\pagestyle{thesis} % Return the page headers back to the "thesis" style
